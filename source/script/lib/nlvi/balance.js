(function(b,y){typeof exports=="object"&&typeof module!="undefined"?module.exports=y():typeof define=="function"&&define.amd?define(y):(b=typeof globalThis!="undefined"?globalThis:b||self,b.Nlvi=y())})(this,function(){"use strict";var Bn=Object.defineProperty,Fn=Object.defineProperties;var Nn=Object.getOwnPropertyDescriptors;var ct=Object.getOwnPropertySymbols;var Yn=Object.prototype.hasOwnProperty,Vn=Object.prototype.propertyIsEnumerable;var lt=(b,y,x)=>y in b?Bn(b,y,{enumerable:!0,configurable:!0,writable:!0,value:x}):b[y]=x,ft=(b,y)=>{for(var x in y||(y={}))Yn.call(y,x)&&lt(b,x,y[x]);if(ct)for(var x of ct(y))Vn.call(y,x)&&lt(b,x,y[x]);return b},ht=(b,y)=>Fn(b,Nn(y));var b=function(r,n){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},b(r,n)};function y(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");b(r,n);function e(){this.constructor=r}r.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var x=function(){return x=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},x.apply(this,arguments)};function pt(r,n){var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&n.indexOf(t)<0&&(e[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(r);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(r,t[o])&&(e[t[o]]=r[t[o]]);return e}function dt(r,n,e,t){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function u(l){try{a(t.next(l))}catch(h){s(h)}}function c(l){try{a(t.throw(l))}catch(h){s(h)}}function a(l){l.done?i(l.value):o(l.value).then(u,c)}a((t=t.apply(r,n||[])).next())})}function Pe(r,n){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},t,o,i,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(l){return c([a,l])}}function c(a){if(t)throw new TypeError("Generator is already executing.");for(;e;)try{if(t=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,o=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=n.call(r,e)}catch(l){a=[6,l],o=0}finally{t=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function X(r){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&r[n],t=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&t>=r.length&&(r=void 0),{value:r&&r[t++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function O(r,n){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var t=e.call(r),o,i=[],s;try{for(;(n===void 0||n-- >0)&&!(o=t.next()).done;)i.push(o.value)}catch(u){s={error:u}}finally{try{o&&!o.done&&(e=t.return)&&e.call(t)}finally{if(s)throw s.error}}return i}function I(r,n,e){if(e||arguments.length===2)for(var t=0,o=n.length,i;t<o;t++)(i||!(t in n))&&(i||(i=Array.prototype.slice.call(n,0,t)),i[t]=n[t]);return r.concat(i||Array.prototype.slice.call(n))}function V(r){return this instanceof V?(this.v=r,this):new V(r)}function vt(r,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e.apply(r,n||[]),o,i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(f){t[f]&&(o[f]=function(p){return new Promise(function(d,v){i.push([f,p,d,v])>1||u(f,p)})})}function u(f,p){try{c(t[f](p))}catch(d){h(i[0][3],d)}}function c(f){f.value instanceof V?Promise.resolve(f.value.v).then(a,l):h(i[0][2],f)}function a(f){u("next",f)}function l(f){u("throw",f)}function h(f,p){f(p),i.shift(),i.length&&u(i[0][0],i[0][1])}}function mt(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],e;return n?n.call(r):(r=typeof X=="function"?X(r):r[Symbol.iterator](),e={},t("next"),t("throw"),t("return"),e[Symbol.asyncIterator]=function(){return this},e);function t(i){e[i]=r[i]&&function(s){return new Promise(function(u,c){s=r[i](s),o(u,c,s.done,s.value)})}}function o(i,s,u,c){Promise.resolve(c).then(function(a){i({value:a,done:u})},s)}}function m(r){return typeof r=="function"}function yt(r){var n=function(t){Error.call(t),t.stack=new Error().stack},e=r(n);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var ie=yt(function(r){return function(e){r(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(t,o){return o+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function se(r,n){if(r){var e=r.indexOf(n);0<=e&&r.splice(e,1)}}var Z=function(){function r(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var n,e,t,o,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var u=X(s),c=u.next();!c.done;c=u.next()){var a=c.value;a.remove(this)}}catch(v){n={error:v}}finally{try{c&&!c.done&&(e=u.return)&&e.call(u)}finally{if(n)throw n.error}}else s.remove(this);var l=this.initialTeardown;if(m(l))try{l()}catch(v){i=v instanceof ie?v.errors:[v]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var f=X(h),p=f.next();!p.done;p=f.next()){var d=p.value;try{ke(d)}catch(v){i=i!=null?i:[],v instanceof ie?i=I(I([],O(i)),O(v.errors)):i.push(v)}}}catch(v){t={error:v}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(t)throw t.error}}}if(i)throw new ie(i)}},r.prototype.add=function(n){var e;if(n&&n!==this)if(this.closed)ke(n);else{if(n instanceof r){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(n)}},r.prototype._hasParent=function(n){var e=this._parentage;return e===n||Array.isArray(e)&&e.includes(n)},r.prototype._addParent=function(n){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n},r.prototype._removeParent=function(n){var e=this._parentage;e===n?this._parentage=null:Array.isArray(e)&&se(e,n)},r.prototype.remove=function(n){var e=this._finalizers;e&&se(e,n),n instanceof r&&n._removeParent(this)},r.EMPTY=function(){var n=new r;return n.closed=!0,n}(),r}();Z.EMPTY;function Se(r){return r instanceof Z||r&&"closed"in r&&m(r.remove)&&m(r.add)&&m(r.unsubscribe)}function ke(r){m(r)?r():r.unsubscribe()}var $e={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ae={setTimeout:function(r,n){for(var e=[],t=2;t<arguments.length;t++)e[t-2]=arguments[t];var o=ae.delegate;return o!=null&&o.setTimeout?o.setTimeout.apply(o,I([r,n],O(e))):setTimeout.apply(void 0,I([r,n],O(e)))},clearTimeout:function(r){var n=ae.delegate;return((n==null?void 0:n.clearTimeout)||clearTimeout)(r)},delegate:void 0};function Ae(r){ae.setTimeout(function(){throw r})}function ue(){}function gt(r){r()}var ce=function(r){y(n,r);function n(e){var t=r.call(this)||this;return t.isStopped=!1,e?(t.destination=e,Se(e)&&e.add(t)):t.destination=Et,t}return n.create=function(e,t,o){return new fe(e,t,o)},n.prototype.next=function(e){this.isStopped||this._next(e)},n.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},n.prototype._next=function(e){this.destination.next(e)},n.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},n.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},n}(Z),wt=Function.prototype.bind;function le(r,n){return wt.call(r,n)}var bt=function(){function r(n){this.partialObserver=n}return r.prototype.next=function(n){var e=this.partialObserver;if(e.next)try{e.next(n)}catch(t){ee(t)}},r.prototype.error=function(n){var e=this.partialObserver;if(e.error)try{e.error(n)}catch(t){ee(t)}else ee(n)},r.prototype.complete=function(){var n=this.partialObserver;if(n.complete)try{n.complete()}catch(e){ee(e)}},r}(),fe=function(r){y(n,r);function n(e,t,o){var i=r.call(this)||this,s;if(m(e)||!e)s={next:e!=null?e:void 0,error:t!=null?t:void 0,complete:o!=null?o:void 0};else{var u;i&&$e.useDeprecatedNextContext?(u=Object.create(e),u.unsubscribe=function(){return i.unsubscribe()},s={next:e.next&&le(e.next,u),error:e.error&&le(e.error,u),complete:e.complete&&le(e.complete,u)}):s=e}return i.destination=new bt(s),i}return n}(ce);function ee(r){Ae(r)}function xt(r){throw r}var Et={closed:!0,next:ue,error:xt,complete:ue},he=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Oe(r){return r}function Pt(r){return r.length===0?Oe:r.length===1?r[0]:function(e){return r.reduce(function(t,o){return o(t)},e)}}var S=function(){function r(n){n&&(this._subscribe=n)}return r.prototype.lift=function(n){var e=new r;return e.source=this,e.operator=n,e},r.prototype.subscribe=function(n,e,t){var o=this,i=kt(n)?n:new fe(n,e,t);return gt(function(){var s=o,u=s.operator,c=s.source;i.add(u?u.call(i,c):c?o._subscribe(i):o._trySubscribe(i))}),i},r.prototype._trySubscribe=function(n){try{return this._subscribe(n)}catch(e){n.error(e)}},r.prototype.forEach=function(n,e){var t=this;return e=Te(e),new e(function(o,i){var s=new fe({next:function(u){try{n(u)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});t.subscribe(s)})},r.prototype._subscribe=function(n){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(n)},r.prototype[he]=function(){return this},r.prototype.pipe=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return Pt(n)(this)},r.prototype.toPromise=function(n){var e=this;return n=Te(n),new n(function(t,o){var i;e.subscribe(function(s){return i=s},function(s){return o(s)},function(){return t(i)})})},r.create=function(n){return new r(n)},r}();function Te(r){var n;return(n=r!=null?r:$e.Promise)!==null&&n!==void 0?n:Promise}function St(r){return r&&m(r.next)&&m(r.error)&&m(r.complete)}function kt(r){return r&&r instanceof ce||St(r)&&Se(r)}function $t(r){return m(r==null?void 0:r.lift)}function q(r){return function(n){if($t(n))return n.lift(function(e){try{return r(e,this)}catch(t){this.error(t)}});throw new TypeError("Unable to lift unknown Observable type")}}function A(r,n,e,t,o){return new At(r,n,e,t,o)}var At=function(r){y(n,r);function n(e,t,o,i,s,u){var c=r.call(this,e)||this;return c.onFinalize=s,c.shouldUnsubscribe=u,c._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:r.prototype._next,c._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:r.prototype._error,c._complete=o?function(){try{o()}catch(a){e.error(a)}finally{this.unsubscribe()}}:r.prototype._complete,c}return n.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var t=this.closed;r.prototype.unsubscribe.call(this),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},n}(ce),Ie={now:function(){return(Ie.delegate||Date).now()},delegate:void 0},Ot=function(r){y(n,r);function n(e,t){return r.call(this)||this}return n.prototype.schedule=function(e,t){return this},n}(Z),te={setInterval:function(r,n){for(var e=[],t=2;t<arguments.length;t++)e[t-2]=arguments[t];var o=te.delegate;return o!=null&&o.setInterval?o.setInterval.apply(o,I([r,n],O(e))):setInterval.apply(void 0,I([r,n],O(e)))},clearInterval:function(r){var n=te.delegate;return((n==null?void 0:n.clearInterval)||clearInterval)(r)},delegate:void 0},Tt=function(r){y(n,r);function n(e,t){var o=r.call(this,e,t)||this;return o.scheduler=e,o.work=t,o.pending=!1,o}return n.prototype.schedule=function(e,t){if(t===void 0&&(t=0),this.closed)return this;this.state=e;var o=this.id,i=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(i,o,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this},n.prototype.requestAsyncId=function(e,t,o){return o===void 0&&(o=0),te.setInterval(e.flush.bind(e,this),o)},n.prototype.recycleAsyncId=function(e,t,o){if(o===void 0&&(o=0),o!=null&&this.delay===o&&this.pending===!1)return t;te.clearInterval(t)},n.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var o=this._execute(e,t);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},n.prototype._execute=function(e,t){var o=!1,i;try{this.work(e)}catch(s){o=!0,i=s||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),i},n.prototype.unsubscribe=function(){if(!this.closed){var e=this,t=e.id,o=e.scheduler,i=o.actions;this.work=this.state=this.scheduler=null,this.pending=!1,se(i,this),t!=null&&(this.id=this.recycleAsyncId(o,t,null)),this.delay=null,r.prototype.unsubscribe.call(this)}},n}(Ot),je=function(){function r(n,e){e===void 0&&(e=r.now),this.schedulerActionCtor=n,this.now=e}return r.prototype.schedule=function(n,e,t){return e===void 0&&(e=0),new this.schedulerActionCtor(this,n).schedule(t,e)},r.now=Ie.now,r}(),It=function(r){y(n,r);function n(e,t){t===void 0&&(t=je.now);var o=r.call(this,e,t)||this;return o.actions=[],o._active=!1,o._scheduled=void 0,o}return n.prototype.flush=function(e){var t=this.actions;if(this._active){t.push(e);return}var o;this._active=!0;do if(o=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,o){for(;e=t.shift();)e.unsubscribe();throw o}},n}(je),jt=new It(Tt),Lt=new S(function(r){return r.complete()});function Rt(r){return r[r.length-1]}function Le(r){return m(Rt(r))?r.pop():void 0}var pe=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};function Re(r){return m(r==null?void 0:r.then)}function _e(r){return m(r[he])}function Ce(r){return Symbol.asyncIterator&&m(r==null?void 0:r[Symbol.asyncIterator])}function qe(r){return new TypeError("You provided "+(r!==null&&typeof r=="object"?"an invalid object":"'"+r+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function _t(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Me=_t();function He(r){return m(r==null?void 0:r[Me])}function Ue(r){return vt(this,arguments,function(){var e,t,o,i;return Pe(this,function(s){switch(s.label){case 0:e=r.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,V(e.read())];case 3:return t=s.sent(),o=t.value,i=t.done,i?[4,V(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,V(o)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function De(r){return m(r==null?void 0:r.getReader)}function j(r){if(r instanceof S)return r;if(r!=null){if(_e(r))return Ct(r);if(pe(r))return qt(r);if(Re(r))return Mt(r);if(Ce(r))return Be(r);if(He(r))return Ht(r);if(De(r))return Ut(r)}throw qe(r)}function Ct(r){return new S(function(n){var e=r[he]();if(m(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function qt(r){return new S(function(n){for(var e=0;e<r.length&&!n.closed;e++)n.next(r[e]);n.complete()})}function Mt(r){return new S(function(n){r.then(function(e){n.closed||(n.next(e),n.complete())},function(e){return n.error(e)}).then(null,Ae)})}function Ht(r){return new S(function(n){var e,t;try{for(var o=X(r),i=o.next();!i.done;i=o.next()){var s=i.value;if(n.next(s),n.closed)return}}catch(u){e={error:u}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}n.complete()})}function Be(r){return new S(function(n){Dt(r,n).catch(function(e){return n.error(e)})})}function Ut(r){return Be(Ue(r))}function Dt(r,n){var e,t,o,i;return dt(this,void 0,void 0,function(){var s,u;return Pe(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),e=mt(r),c.label=1;case 1:return[4,e.next()];case 2:if(t=c.sent(),!!t.done)return[3,4];if(s=t.value,n.next(s),n.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=c.sent(),o={error:u},[3,11];case 6:return c.trys.push([6,,9,10]),t&&!t.done&&(i=e.return)?[4,i.call(e)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return n.complete(),[2]}})})}function M(r,n,e,t,o){t===void 0&&(t=0),o===void 0&&(o=!1);var i=n.schedule(function(){e(),o?r.add(this.schedule(null,t)):this.unsubscribe()},t);if(r.add(i),!o)return i}function Fe(r,n){return n===void 0&&(n=0),q(function(e,t){e.subscribe(A(t,function(o){return M(t,r,function(){return t.next(o)},n)},function(){return M(t,r,function(){return t.complete()},n)},function(o){return M(t,r,function(){return t.error(o)},n)}))})}function Ne(r,n){return n===void 0&&(n=0),q(function(e,t){t.add(r.schedule(function(){return e.subscribe(t)},n))})}function Bt(r,n){return j(r).pipe(Ne(n),Fe(n))}function Ft(r,n){return j(r).pipe(Ne(n),Fe(n))}function Nt(r,n){return new S(function(e){var t=0;return n.schedule(function(){t===r.length?e.complete():(e.next(r[t++]),e.closed||this.schedule())})})}function Yt(r,n){return new S(function(e){var t;return M(e,n,function(){t=r[Me](),M(e,n,function(){var o,i,s;try{o=t.next(),i=o.value,s=o.done}catch(u){e.error(u);return}s?e.complete():e.next(i)},0,!0)}),function(){return m(t==null?void 0:t.return)&&t.return()}})}function Ye(r,n){if(!r)throw new Error("Iterable cannot be null");return new S(function(e){M(e,n,function(){var t=r[Symbol.asyncIterator]();M(e,n,function(){t.next().then(function(o){o.done?e.complete():e.next(o.value)})},0,!0)})})}function Vt(r,n){return Ye(Ue(r),n)}function zt(r,n){if(r!=null){if(_e(r))return Bt(r,n);if(pe(r))return Nt(r,n);if(Re(r))return Ft(r,n);if(Ce(r))return Ye(r,n);if(He(r))return Yt(r,n);if(De(r))return Vt(r,n)}throw qe(r)}function Wt(r,n){return n?zt(r,n):j(r)}function k(r,n){return q(function(e,t){var o=0;e.subscribe(A(t,function(i){t.next(r.call(n,i,o++))}))})}var Gt=Array.isArray;function Kt(r,n){return Gt(n)?r.apply(void 0,I([],O(n))):r(n)}function Xt(r){return k(function(n){return Kt(r,n)})}function Qt(r,n,e,t,o,i,s,u){var c=[],a=0,l=0,h=!1,f=function(){h&&!c.length&&!a&&n.complete()},p=function(v){return a<t?d(v):c.push(v)},d=function(v){i&&n.next(v),a++;var E=!1;j(e(v,l++)).subscribe(A(n,function(g){o==null||o(g),i?p(g):n.next(g)},function(){E=!0},void 0,function(){if(E)try{a--;for(var g=function(){var P=c.shift();s?M(n,s,function(){return d(P)}):d(P)};c.length&&a<t;)g();f()}catch(P){n.error(P)}}))};return r.subscribe(A(n,p,function(){h=!0,f()})),function(){u==null||u()}}function Ve(r,n,e){return e===void 0&&(e=1/0),m(n)?Ve(function(t,o){return k(function(i,s){return n(t,i,o,s)})(j(r(t,o)))},e):(typeof n=="number"&&(e=n),q(function(t,o){return Qt(t,o,r,e)}))}var Jt=["addListener","removeListener"],Zt=["addEventListener","removeEventListener"],en=["on","off"];function z(r,n,e,t){if(m(e)&&(t=e,e=void 0),t)return z(r,n,e).pipe(Xt(t));var o=O(rn(r)?Zt.map(function(u){return function(c){return r[u](n,c,e)}}):tn(r)?Jt.map(ze(r,n)):nn(r)?en.map(ze(r,n)):[],2),i=o[0],s=o[1];if(!i&&pe(r))return Ve(function(u){return z(u,n,e)})(j(r));if(!i)throw new TypeError("Invalid event target");return new S(function(u){var c=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return u.next(1<a.length?a:a[0])};return i(c),function(){return s(c)}})}function ze(r,n){return function(e){return function(t){return r[e](n,t)}}}function tn(r){return m(r.addListener)&&m(r.removeListener)}function nn(r){return m(r.on)&&m(r.off)}function rn(r){return m(r.addEventListener)&&m(r.removeEventListener)}var on=Array.isArray;function sn(r){return r.length===1&&on(r[0])?r[0]:r}function We(r,n){return q(function(e,t){var o=0;e.subscribe(A(t,function(i){return r.call(n,i,o++)&&t.next(i)}))})}function Ge(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var e=Le(r),t=sn(r);return t.length?new S(function(o){var i=t.map(function(){return[]}),s=t.map(function(){return!1});o.add(function(){i=s=null});for(var u=function(a){j(t[a]).subscribe(A(o,function(l){if(i[a].push(l),i.every(function(f){return f.length})){var h=i.map(function(f){return f.shift()});o.next(e?e.apply(void 0,I([],O(h))):h),i.some(function(f,p){return!f.length&&s[p]})&&o.complete()}},function(){s[a]=!0,!i[a].length&&o.complete()}))},c=0;!o.closed&&c<t.length;c++)u(c);return function(){i=s=null}}):Lt}function an(r,n){return n===void 0&&(n=jt),q(function(e,t){var o=null,i=null,s=null,u=function(){if(o){o.unsubscribe(),o=null;var a=i;i=null,t.next(a)}};function c(){var a=s+r,l=n.now();if(l<a){o=this.schedule(void 0,a-l),t.add(o);return}u()}e.subscribe(A(t,function(a){i=a,s=n.now(),o||(o=n.schedule(c,r),t.add(o))},function(){u(),t.complete()},void 0,function(){i=o=null}))})}function de(r,n){return q(function(e,t){var o=null,i=0,s=!1,u=function(){return s&&!o&&t.complete()};e.subscribe(A(t,function(c){o==null||o.unsubscribe();var a=0,l=i++;j(r(c,l)).subscribe(o=A(t,function(h){return t.next(n?n(c,h,l,a++):h)},function(){o=null,u()}))},function(){s=!0,u()}))})}function un(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var e=Le(r);return q(function(t,o){for(var i=r.length,s=new Array(i),u=r.map(function(){return!1}),c=!1,a=function(h){j(r[h]).subscribe(A(o,function(f){s[h]=f,!c&&!u[h]&&(u[h]=!0,(c=u.every(Oe))&&(u=null))},ue))},l=0;l<i;l++)a(l);t.subscribe(A(o,function(h){if(c){var f=I([h],O(s));o.next(e?e.apply(void 0,I([],O(f))):f)}}))})}function cn(r,n){n===void 0&&(n={});var e=n.selector,t=pt(n,["selector"]);return new S(function(o){var i=new AbortController,s=i.signal,u=!0,c=t.signal;if(c)if(c.aborted)i.abort();else{var a=function(){s.aborted||i.abort()};c.addEventListener("abort",a),o.add(function(){return c.removeEventListener("abort",a)})}var l=x(x({},t),{signal:s}),h=function(f){u=!1,o.error(f)};return fetch(r,l).then(function(f){e?j(e(f)).subscribe(A(o,void 0,function(){u=!1,o.complete()},h)):(u=!1,o.next(f),o.complete())}).catch(h),function(){u&&i.abort()}})}function ln(r,n){const e=cn(r).pipe(de(s=>s.text()),k(s=>new window.DOMParser().parseFromString(s,"text/xml")),k(s=>s.querySelectorAll("entry")),k(s=>[...s].map(u=>({title:u.getElementsByTagName("title")[0].textContent,url:u.getElementsByTagName("url")[0].textContent,content:u.getElementsByTagName("content")[0].textContent})))),t=z(document.getElementById(n),"input").pipe(an(500),k(({target:s})=>s.value.trim())),o=t.pipe(k(s=>!!s)),i=t.pipe(un(e),k(([s,u])=>u.filter(({title:c,content:a})=>c.indexOf(s)>=0||a.indexOf(s)>=0).map(c=>{const a=new RegExp(`(${s})`,"gi"),l=c.title.replace(a,'<strong class="search-keyword">$1</strong>');let h=c.content.replace(/<[^>]+>/g,"");const f=h.indexOf(s);return h=h.slice(f<20?0:f-20,f<0?100:f+80).replace(a,'<strong class="search-keyword">$1</strong>'),ht(ft({},c),{title:l,content:h})})));return Ge(o,i).pipe(k(([s,u])=>s?u:[]))}function Ke(r,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function ve(r,n,e){return n&&Ke(r.prototype,n),e&&Ke(r,e),r}function D(){return(D=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}return r}).apply(this,arguments)}function ne(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n}function Xe(r){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(r)}function me(r,n){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(r,n)}function Qe(r,n,e){return(Qe=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(t,o,i){var s=[null];s.push.apply(s,o);var u=new(Function.bind.apply(t,s));return i&&me(u,i.prototype),u}).apply(null,arguments)}function Je(r){var n=typeof Map=="function"?new Map:void 0;return(Je=function(e){if(e===null||Function.toString.call(e).indexOf("[native code]")===-1)return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(n!==void 0){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return Qe(e,arguments,Xe(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),me(t,e)})(r)}function W(r,n){try{var e=r()}catch(t){return n(t)}return e&&e.then?e.then(void 0,n):e}typeof Symbol!="undefined"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),typeof Symbol!="undefined"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var H,fn="2.9.7",hn=function(){};(function(r){r[r.off=0]="off",r[r.error=1]="error",r[r.warning=2]="warning",r[r.info=3]="info",r[r.debug=4]="debug"})(H||(H={}));var Ze=H.off,B=function(){function r(e){this.t=e}r.getLevel=function(){return Ze},r.setLevel=function(e){return Ze=H[e]};var n=r.prototype;return n.error=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];this.i(console.error,H.error,t)},n.warn=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];this.i(console.warn,H.warning,t)},n.info=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];this.i(console.info,H.info,t)},n.debug=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];this.i(console.log,H.debug,t)},n.i=function(e,t,o){t<=r.getLevel()&&e.apply(console,["["+this.t+"] "].concat(o))},r}(),F=we,pn=tt,dn=ye,vn=nt,mn=rt,et="/",yn=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function ye(r,n){for(var e,t=[],o=0,i=0,s="",u=n&&n.delimiter||et,c=n&&n.whitelist||void 0,a=!1;(e=yn.exec(r))!==null;){var l=e[0],h=e[1],f=e.index;if(s+=r.slice(i,f),i=f+l.length,h)s+=h[1],a=!0;else{var p="",d=e[2],v=e[3],E=e[4],g=e[5];if(!a&&s.length){var P=s.length-1,_=s[P];(!c||c.indexOf(_)>-1)&&(p=_,s=s.slice(0,P))}s&&(t.push(s),s="",a=!1);var T=v||E,w=p||u;t.push({name:d||o++,prefix:p,delimiter:w,optional:g==="?"||g==="*",repeat:g==="+"||g==="*",pattern:T?gn(T):"[^"+R(w===u?w:w+u)+"]+?"})}}return(s||i<r.length)&&t.push(s+r.substr(i)),t}function tt(r,n){return function(e,t){var o=r.exec(e);if(!o)return!1;for(var i=o[0],s=o.index,u={},c=t&&t.decode||decodeURIComponent,a=1;a<o.length;a++)if(o[a]!==void 0){var l=n[a-1];u[l.name]=l.repeat?o[a].split(l.delimiter).map(function(h){return c(h,l)}):c(o[a],l)}return{path:i,index:s,params:u}}}function nt(r,n){for(var e=new Array(r.length),t=0;t<r.length;t++)typeof r[t]=="object"&&(e[t]=new RegExp("^(?:"+r[t].pattern+")$",ge(n)));return function(o,i){for(var s="",u=i&&i.encode||encodeURIComponent,c=!i||i.validate!==!1,a=0;a<r.length;a++){var l=r[a];if(typeof l!="string"){var h,f=o?o[l.name]:void 0;if(Array.isArray(f)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but got array');if(f.length===0){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var p=0;p<f.length;p++){if(h=u(f[p],l),c&&!e[a].test(h))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'"');s+=(p===0?l.prefix:l.delimiter)+h}}else if(typeof f!="string"&&typeof f!="number"&&typeof f!="boolean"){if(!l.optional)throw new TypeError('Expected "'+l.name+'" to be '+(l.repeat?"an array":"a string"))}else{if(h=u(String(f),l),c&&!e[a].test(h))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but got "'+h+'"');s+=l.prefix+h}}else s+=l}return s}}function R(r){return r.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function gn(r){return r.replace(/([=!:$/()])/g,"\\$1")}function ge(r){return r&&r.sensitive?"":"i"}function rt(r,n,e){for(var t=(e=e||{}).strict,o=e.start!==!1,i=e.end!==!1,s=e.delimiter||et,u=[].concat(e.endsWith||[]).map(R).concat("$").join("|"),c=o?"^":"",a=0;a<r.length;a++){var l=r[a];if(typeof l=="string")c+=R(l);else{var h=l.repeat?"(?:"+l.pattern+")(?:"+R(l.delimiter)+"(?:"+l.pattern+"))*":l.pattern;n&&n.push(l),c+=l.optional?l.prefix?"(?:"+R(l.prefix)+"("+h+"))?":"("+h+")?":R(l.prefix)+"("+h+")"}}if(i)t||(c+="(?:"+R(s)+")?"),c+=u==="$"?"$":"(?="+u+")";else{var f=r[r.length-1],p=typeof f=="string"?f[f.length-1]===s:f===void 0;t||(c+="(?:"+R(s)+"(?="+u+"))?"),p||(c+="(?="+R(s)+"|"+u+")")}return new RegExp(c,ge(e))}function we(r,n,e){return r instanceof RegExp?function(t,o){if(!o)return t;var i=t.source.match(/\((?!\?)/g);if(i)for(var s=0;s<i.length;s++)o.push({name:s,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return t}(r,n):Array.isArray(r)?function(t,o,i){for(var s=[],u=0;u<t.length;u++)s.push(we(t[u],o,i).source);return new RegExp("(?:"+s.join("|")+")",ge(i))}(r,n,e):function(t,o,i){return rt(ye(t,i),o,i)}(r,n,e)}F.match=function(r,n){var e=[];return tt(we(r,e,n),e)},F.regexpToFunction=pn,F.parse=dn,F.compile=function(r,n){return nt(ye(r,n),n)},F.tokensToFunction=vn,F.tokensToRegExp=mn;var L={container:"container",history:"history",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"},N=new(function(){function r(){this.o=L,this.u=new DOMParser}var n=r.prototype;return n.toString=function(e){return e.outerHTML},n.toDocument=function(e){return this.u.parseFromString(e,"text/html")},n.toElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t},n.getHtml=function(e){return e===void 0&&(e=document),this.toString(e.documentElement)},n.getWrapper=function(e){return e===void 0&&(e=document),e.querySelector("["+this.o.prefix+'="'+this.o.wrapper+'"]')},n.getContainer=function(e){return e===void 0&&(e=document),e.querySelector("["+this.o.prefix+'="'+this.o.container+'"]')},n.removeContainer=function(e){document.body.contains(e)&&e.parentNode.removeChild(e)},n.addContainer=function(e,t){var o=this.getContainer();o?this.s(e,o):t.appendChild(e)},n.getNamespace=function(e){e===void 0&&(e=document);var t=e.querySelector("["+this.o.prefix+"-"+this.o.namespace+"]");return t?t.getAttribute(this.o.prefix+"-"+this.o.namespace):null},n.getHref=function(e){if(e.tagName&&e.tagName.toLowerCase()==="a"){if(typeof e.href=="string")return e.href;var t=e.getAttribute("href")||e.getAttribute("xlink:href");if(t)return this.resolveUrl(t.baseVal||t)}return null},n.resolveUrl=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var i=t.length;if(i===0)throw new Error("resolveUrl requires at least one argument; got none.");var s=document.createElement("base");if(s.href=arguments[0],i===1)return s.href;var u=document.getElementsByTagName("head")[0];u.insertBefore(s,u.firstChild);for(var c,a=document.createElement("a"),l=1;l<i;l++)a.href=arguments[l],s.href=c=a.href;return u.removeChild(s),c},n.s=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},r}()),ot=new(function(){function r(){this.h=[],this.v=-1}var n=r.prototype;return n.init=function(e,t){this.l="barba";var o={ns:t,scroll:{x:window.scrollX,y:window.scrollY},url:e};this.h.push(o),this.v=0;var i={from:this.l,index:0,states:[].concat(this.h)};window.history&&window.history.replaceState(i,"",e)},n.change=function(e,t,o){if(o&&o.state){var i=o.state,s=i.index;t=this.m(this.v-s),this.replace(i.states),this.v=s}else this.add(e,t);return t},n.add=function(e,t){var o=this.size,i=this.p(t),s={ns:"tmp",scroll:{x:window.scrollX,y:window.scrollY},url:e};this.h.push(s),this.v=o;var u={from:this.l,index:o,states:[].concat(this.h)};switch(i){case"push":window.history&&window.history.pushState(u,"",e);break;case"replace":window.history&&window.history.replaceState(u,"",e)}},n.update=function(e,t){var o=t||this.v,i=D({},this.get(o),{},e);this.set(o,i)},n.remove=function(e){e?this.h.splice(e,1):this.h.pop(),this.v--},n.clear=function(){this.h=[],this.v=-1},n.replace=function(e){this.h=e},n.get=function(e){return this.h[e]},n.set=function(e,t){return this.h[e]=t},n.p=function(e){var t="push",o=e,i=L.prefix+"-"+L.history;return o.hasAttribute&&o.hasAttribute(i)&&(t=o.getAttribute(i)),t},n.m=function(e){return Math.abs(e)>1?e>0?"forward":"back":e===0?"popstate":e>0?"back":"forward"},ve(r,[{key:"current",get:function(){return this.h[this.v]}},{key:"state",get:function(){return this.h[this.h.length-1]}},{key:"previous",get:function(){return this.v<1?null:this.h[this.v-1]}},{key:"size",get:function(){return this.h.length}}]),r}()),re=function(r,n){try{var e=function(){if(!n.next.html)return Promise.resolve(r).then(function(t){var o=n.next;if(t){var i=N.toElement(t);o.namespace=N.getNamespace(i),o.container=N.getContainer(i),o.html=t,ot.update({ns:o.namespace});var s=N.toDocument(t);document.title=s.title}})}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(t){return Promise.reject(t)}},it=F,wn={__proto__:null,update:re,nextTick:function(){return new Promise(function(r){window.requestAnimationFrame(r)})},pathToRegexp:it},st=function(){return window.location.origin},Q=function(r){return r===void 0&&(r=window.location.href),oe(r).port},oe=function(r){var n,e=r.match(/:\d+/);if(e===null)/^http/.test(r)&&(n=80),/^https/.test(r)&&(n=443);else{var t=e[0].substring(1);n=parseInt(t,10)}var o,i=r.replace(st(),""),s={},u=i.indexOf("#");u>=0&&(o=i.slice(u+1),i=i.slice(0,u));var c=i.indexOf("?");return c>=0&&(s=at(i.slice(c+1)),i=i.slice(0,c)),{hash:o,path:i,port:n,query:s}},at=function(r){return r.split("&").reduce(function(n,e){var t=e.split("=");return n[t[0]]=t[1],n},{})},be=function(r){return r===void 0&&(r=window.location.href),r.replace(/(\/#.*|\/|#.*)$/,"")},bn={__proto__:null,getHref:function(){return window.location.href},getOrigin:st,getPort:Q,getPath:function(r){return r===void 0&&(r=window.location.href),oe(r).path},parse:oe,parseQuery:at,clean:be};function xn(r,n,e){return n===void 0&&(n=2e3),new Promise(function(t,o){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===XMLHttpRequest.DONE){if(i.status===200)t(i.responseText);else if(i.status){var s={status:i.status,statusText:i.statusText};e(r,s),o(s)}}},i.ontimeout=function(){var s=new Error("Timeout error ["+n+"]");e(r,s),o(s)},i.onerror=function(){var s=new Error("Fetch error");e(r,s),o(s)},i.open("GET",r),i.timeout=n,i.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),i.setRequestHeader("x-barba","yes"),i.send()})}var En=function(r){return!!r&&(typeof r=="object"||typeof r=="function")&&typeof r.then=="function"};function G(r,n){return n===void 0&&(n={}),function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var i=!1,s=new Promise(function(u,c){n.async=function(){return i=!0,function(l,h){l?c(l):u(h)}};var a=r.apply(n,t);i||(En(a)?a.then(u,c):u(a))});return s}}var U=new(function(r){function n(){var t;return(t=r.call(this)||this).logger=new B("@barba/core"),t.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeOnce","once","afterOnce","before","beforeLeave","leave","afterLeave","beforeEnter","enter","afterEnter","after"],t.registered=new Map,t.init(),t}ne(n,r);var e=n.prototype;return e.init=function(){var t=this;this.registered.clear(),this.all.forEach(function(o){t[o]||(t[o]=function(i,s){t.registered.has(o)||t.registered.set(o,new Set),t.registered.get(o).add({ctx:s||{},fn:i})})})},e.do=function(t){for(var o=this,i=arguments.length,s=new Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];if(this.registered.has(t)){var c=Promise.resolve();return this.registered.get(t).forEach(function(a){c=c.then(function(){return G(a.fn,a.ctx).apply(void 0,s)})}),c.catch(function(a){o.logger.debug("Hook error ["+t+"]"),o.logger.error(a)})}return Promise.resolve()},e.clear=function(){var t=this;this.all.forEach(function(o){delete t[o]}),this.init()},e.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var t=[];this.registered.forEach(function(o,i){return t.push(i)}),this.logger.info("Registered hooks: "+t.join(","))},n}(hn)),ut=function(){function r(n){if(this.P=[],typeof n=="boolean")this.g=n;else{var e=Array.isArray(n)?n:[n];this.P=e.map(function(t){return it(t)})}}return r.prototype.checkHref=function(n){if(typeof this.g=="boolean")return this.g;var e=oe(n).path;return this.P.some(function(t){return t.exec(e)!==null})},r}(),Pn=function(r){function n(t){var o;return(o=r.call(this,t)||this).k=new Map,o}ne(n,r);var e=n.prototype;return e.set=function(t,o,i){return this.k.set(t,{action:i,request:o}),{action:i,request:o}},e.get=function(t){return this.k.get(t)},e.getRequest=function(t){return this.k.get(t).request},e.getAction=function(t){return this.k.get(t).action},e.has=function(t){return!this.checkHref(t)&&this.k.has(t)},e.delete=function(t){return this.k.delete(t)},e.update=function(t,o){var i=D({},this.k.get(t),{},o);return this.k.set(t,i),i},n}(ut),Sn=function(){return!window.history.pushState},kn=function(r){return!r.el||!r.href},$n=function(r){var n=r.event;return n.which>1||n.metaKey||n.ctrlKey||n.shiftKey||n.altKey},An=function(r){var n=r.el;return n.hasAttribute("target")&&n.target==="_blank"},On=function(r){var n=r.el;return n.protocol!==void 0&&window.location.protocol!==n.protocol||n.hostname!==void 0&&window.location.hostname!==n.hostname},Tn=function(r){var n=r.el;return n.port!==void 0&&Q()!==Q(n.href)},In=function(r){var n=r.el;return n.getAttribute&&typeof n.getAttribute("download")=="string"},jn=function(r){return r.el.hasAttribute(L.prefix+"-"+L.prevent)},Ln=function(r){return Boolean(r.el.closest("["+L.prefix+"-"+L.prevent+'="all"]'))},Rn=function(r){var n=r.href;return be(n)===be()&&Q(n)===Q()},_n=function(r){function n(t){var o;return(o=r.call(this,t)||this).suite=[],o.tests=new Map,o.init(),o}ne(n,r);var e=n.prototype;return e.init=function(){this.add("pushState",Sn),this.add("exists",kn),this.add("newTab",$n),this.add("blank",An),this.add("corsDomain",On),this.add("corsPort",Tn),this.add("download",In),this.add("preventSelf",jn),this.add("preventAll",Ln),this.add("sameUrl",Rn,!1)},e.add=function(t,o,i){i===void 0&&(i=!0),this.tests.set(t,o),i&&this.suite.push(t)},e.run=function(t,o,i,s){return this.tests.get(t)({el:o,event:i,href:s})},e.checkLink=function(t,o,i){var s=this;return this.suite.some(function(u){return s.run(u,t,o,i)})},n}(ut),xe=function(r){function n(e,t){var o;t===void 0&&(t="Barba error");for(var i=arguments.length,s=new Array(i>2?i-2:0),u=2;u<i;u++)s[u-2]=arguments[u];return(o=r.call.apply(r,[this].concat(s))||this).error=e,o.label=t,Error.captureStackTrace&&Error.captureStackTrace(function(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(o),n),o.name="BarbaError",o}return ne(n,r),n}(Je(Error)),Cn=function(){function r(e){e===void 0&&(e=[]),this.logger=new B("@barba/core"),this.all=[],this.page=[],this.once=[],this.A=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],e&&(this.all=this.all.concat(e)),this.update()}var n=r.prototype;return n.add=function(e,t){switch(e){case"rule":this.A.splice(t.position||0,0,t.value);break;case"transition":default:this.all.push(t)}this.update()},n.resolve=function(e,t){var o=this;t===void 0&&(t={});var i=t.once?this.once:this.page;i=i.filter(t.self?function(f){return f.name&&f.name==="self"}:function(f){return!f.name||f.name!=="self"});var s=new Map,u=i.find(function(f){var p=!0,d={};return!(!t.self||f.name!=="self")||(o.A.reverse().forEach(function(v){p&&(p=o.R(f,v,e,d),f.from&&f.to&&(p=o.R(f,v,e,d,"from")&&o.R(f,v,e,d,"to")),f.from&&!f.to&&(p=o.R(f,v,e,d,"from")),!f.from&&f.to&&(p=o.R(f,v,e,d,"to")))}),s.set(f,d),p)}),c=s.get(u),a=[];if(a.push(t.once?"once":"page"),t.self&&a.push("self"),c){var l,h=[u];Object.keys(c).length>0&&h.push(c),(l=this.logger).info.apply(l,["Transition found ["+a.join(",")+"]"].concat(h))}else this.logger.info("No transition found ["+a.join(",")+"]");return u},n.update=function(){var e=this;this.all=this.all.map(function(t){return e.T(t)}).sort(function(t,o){return t.priority-o.priority}).reverse().map(function(t){return delete t.priority,t}),this.page=this.all.filter(function(t){return t.leave!==void 0||t.enter!==void 0}),this.once=this.all.filter(function(t){return t.once!==void 0})},n.R=function(e,t,o,i,s){var u=!0,c=!1,a=e,l=t.name,h=l,f=l,p=l,d=s?a[s]:a,v=s==="to"?o.next:o.current;if(s?d&&d[l]:d[l]){switch(t.type){case"strings":default:var E=Array.isArray(d[h])?d[h]:[d[h]];v[h]&&E.indexOf(v[h])!==-1&&(c=!0),E.indexOf(v[h])===-1&&(u=!1);break;case"object":var g=Array.isArray(d[f])?d[f]:[d[f]];v[f]?(v[f].name&&g.indexOf(v[f].name)!==-1&&(c=!0),g.indexOf(v[f].name)===-1&&(u=!1)):u=!1;break;case"function":d[p](o)?c=!0:u=!1}c&&(s?(i[s]=i[s]||{},i[s][l]=a[s][l]):i[l]=a[l])}return u},n.O=function(e,t,o){var i=0;return(e[t]||e.from&&e.from[t]||e.to&&e.to[t])&&(i+=Math.pow(10,o),e.from&&e.from[t]&&(i+=1),e.to&&e.to[t]&&(i+=2)),i},n.T=function(e){var t=this;e.priority=0;var o=0;return this.A.forEach(function(i,s){o+=t.O(e,i.name,s+1)}),e.priority=o,e},r}(),qn=function(){function r(e){e===void 0&&(e=[]),this.logger=new B("@barba/core"),this.S=!1,this.store=new Cn(e)}var n=r.prototype;return n.get=function(e,t){return this.store.resolve(e,t)},n.doOnce=function(e){var t=e.data,o=e.transition;try{var i=function(){s.S=!1},s=this,u=o||{};s.S=!0;var c=W(function(){return Promise.resolve(s.j("beforeOnce",t,u)).then(function(){return Promise.resolve(s.once(t,u)).then(function(){return Promise.resolve(s.j("afterOnce",t,u)).then(function(){})})})},function(a){s.S=!1,s.logger.debug("Transition error [before/after/once]"),s.logger.error(a)});return Promise.resolve(c&&c.then?c.then(i):i())}catch(a){return Promise.reject(a)}},n.doPage=function(e){var t=e.data,o=e.transition,i=e.page,s=e.wrapper;try{var u=function(p){if(c)return p;a.S=!1},c=!1,a=this,l=o||{},h=l.sync===!0||!1;a.S=!0;var f=W(function(){function p(){return Promise.resolve(a.j("before",t,l)).then(function(){var v=!1;function E(P){return v?P:Promise.resolve(a.remove(t)).then(function(){return Promise.resolve(a.j("after",t,l)).then(function(){})})}var g=function(){if(h)return W(function(){return Promise.resolve(a.add(t,s)).then(function(){return Promise.resolve(a.j("beforeLeave",t,l)).then(function(){return Promise.resolve(a.j("beforeEnter",t,l)).then(function(){return Promise.resolve(Promise.all([a.leave(t,l),a.enter(t,l)])).then(function(){return Promise.resolve(a.j("afterLeave",t,l)).then(function(){return Promise.resolve(a.j("afterEnter",t,l)).then(function(){})})})})})})},function(w){if(a.M(w))throw new xe(w,"Transition error [sync]")});var P=function(w){return v?w:W(function(){var C=function(){if(_!==!1)return Promise.resolve(a.add(t,s)).then(function(){return Promise.resolve(a.j("beforeEnter",t,l)).then(function(){return Promise.resolve(a.enter(t,l,_)).then(function(){return Promise.resolve(a.j("afterEnter",t,l)).then(function(){})})})})}();if(C&&C.then)return C.then(function(){})},function(C){if(a.M(C))throw new xe(C,"Transition error [before/after/enter]")})},_=!1,T=W(function(){return Promise.resolve(a.j("beforeLeave",t,l)).then(function(){return Promise.resolve(Promise.all([a.leave(t,l),re(i,t)]).then(function(w){return w[0]})).then(function(w){return _=w,Promise.resolve(a.j("afterLeave",t,l)).then(function(){})})})},function(w){if(a.M(w))throw new xe(w,"Transition error [before/after/leave]")});return T&&T.then?T.then(P):P(T)}();return g&&g.then?g.then(E):E(g)})}var d=function(){if(h)return Promise.resolve(re(i,t)).then(function(){})}();return d&&d.then?d.then(p):p()},function(p){throw a.S=!1,p.name&&p.name==="BarbaError"?(a.logger.debug(p.label),a.logger.error(p.error),p):(a.logger.debug("Transition error [page]"),a.logger.error(p),p)});return Promise.resolve(f&&f.then?f.then(u):u(f))}catch(p){return Promise.reject(p)}},n.once=function(e,t){try{return Promise.resolve(U.do("once",e,t)).then(function(){return t.once?G(t.once,t)(e):Promise.resolve()})}catch(o){return Promise.reject(o)}},n.leave=function(e,t){try{return Promise.resolve(U.do("leave",e,t)).then(function(){return t.leave?G(t.leave,t)(e):Promise.resolve()})}catch(o){return Promise.reject(o)}},n.enter=function(e,t,o){try{return Promise.resolve(U.do("enter",e,t)).then(function(){return t.enter?G(t.enter,t)(e,o):Promise.resolve()})}catch(i){return Promise.reject(i)}},n.add=function(e,t){try{return N.addContainer(e.next.container,t),U.do("nextAdded",e),Promise.resolve()}catch(o){return Promise.reject(o)}},n.remove=function(e){try{return N.removeContainer(e.current.container),U.do("currentRemoved",e),Promise.resolve()}catch(t){return Promise.reject(t)}},n.M=function(e){return e.message?!/Timeout error|Fetch error/.test(e.message):!e.status},n.j=function(e,t,o){try{return Promise.resolve(U.do(e,t,o)).then(function(){return o[e]?G(o[e],o)(t):Promise.resolve()})}catch(i){return Promise.reject(i)}},ve(r,[{key:"isRunning",get:function(){return this.S},set:function(e){this.S=e}},{key:"hasOnce",get:function(){return this.store.once.length>0}},{key:"hasSelf",get:function(){return this.store.all.some(function(e){return e.name==="self"})}},{key:"shouldWait",get:function(){return this.store.all.some(function(e){return e.to&&!e.to.route||e.sync})}}]),r}(),Mn=function(){function r(n){var e=this;this.names=["beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,n.length!==0&&(n.forEach(function(t){e.byNamespace.set(t.namespace,t)}),this.names.forEach(function(t){U[t](e.L(t))}))}return r.prototype.L=function(n){var e=this;return function(t){var o=n.match(/enter/i)?t.next:t.current,i=e.byNamespace.get(o.namespace);return i&&i[n]?G(i[n],i)(t):Promise.resolve()}},r}();Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(r){var n=this;do{if(n.matches(r))return n;n=n.parentElement||n.parentNode}while(n!==null&&n.nodeType===1);return null});var Hn={container:null,html:"",namespace:"",url:{hash:"",href:"",path:"",port:null,query:{}}},Un=new(function(){function r(){this.version=fn,this.schemaPage=Hn,this.Logger=B,this.logger=new B("@barba/core"),this.plugins=[],this.hooks=U,this.dom=N,this.helpers=wn,this.history=ot,this.request=xn,this.url=bn}var n=r.prototype;return n.use=function(e,t){var o=this.plugins;o.indexOf(e)>-1?this.logger.warn("Plugin ["+e.name+"] already installed."):typeof e.install=="function"?(e.install(this,t),o.push(e)):this.logger.warn("Plugin ["+e.name+'] has no "install" method.')},n.init=function(e){var t=e===void 0?{}:e,o=t.transitions,i=o===void 0?[]:o,s=t.views,u=s===void 0?[]:s,c=t.schema,a=c===void 0?L:c,l=t.requestError,h=t.timeout,f=h===void 0?2e3:h,p=t.cacheIgnore,d=p!==void 0&&p,v=t.prefetchIgnore,E=v!==void 0&&v,g=t.preventRunning,P=g!==void 0&&g,_=t.prevent,T=_===void 0?null:_,w=t.debug,C=t.logLevel;if(B.setLevel((w!==void 0&&w)===!0?"debug":C===void 0?"off":C),this.logger.info(this.version),Object.keys(a).forEach(function(J){L[J]&&(L[J]=a[J])}),this.$=l,this.timeout=f,this.cacheIgnore=d,this.prefetchIgnore=E,this.preventRunning=P,this._=this.dom.getWrapper(),!this._)throw new Error("[@barba/core] No Barba wrapper found");this._.setAttribute("aria-live","polite"),this.q();var Ee=this.data.current;if(!Ee.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new Pn(d),this.prevent=new _n(E),this.transitions=new qn(i),this.views=new Mn(u),T!==null){if(typeof T!="function")throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",T)}this.history.init(Ee.url.href,Ee.namespace),this.B=this.B.bind(this),this.U=this.U.bind(this),this.D=this.D.bind(this),this.F(),this.plugins.forEach(function(J){return J.init()});var K=this.data;K.trigger="barba",K.next=K.current,K.current=D({},this.schemaPage),this.hooks.do("ready",K),this.once(K),this.q()},n.destroy=function(){this.q(),this.H(),this.history.clear(),this.hooks.clear(),this.plugins=[]},n.force=function(e){window.location.assign(e)},n.go=function(e,t,o){var i;if(t===void 0&&(t="barba"),this.transitions.isRunning)this.force(e);else if(!(i=t==="popstate"?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(e):this.prevent.run("sameUrl",null,null,e))||this.transitions.hasSelf)return t=this.history.change(e,t,o),o&&(o.stopPropagation(),o.preventDefault()),this.page(e,t,i)},n.once=function(e){try{var t=this;return Promise.resolve(t.hooks.do("beforeEnter",e)).then(function(){function o(){return Promise.resolve(t.hooks.do("afterEnter",e)).then(function(){})}var i=function(){if(t.transitions.hasOnce){var s=t.transitions.get(e,{once:!0});return Promise.resolve(t.transitions.doOnce({transition:s,data:e})).then(function(){})}}();return i&&i.then?i.then(o):o()})}catch(o){return Promise.reject(o)}},n.page=function(e,t,o){try{var i=function(){var a=s.data;return Promise.resolve(s.hooks.do("page",a)).then(function(){var l=W(function(){var h=s.transitions.get(a,{once:!1,self:o});return Promise.resolve(s.transitions.doPage({data:a,page:u,transition:h,wrapper:s._})).then(function(){s.q()})},function(){B.getLevel()===0&&s.force(a.current.url.href)});if(l&&l.then)return l.then(function(){})})},s=this;s.data.next.url=D({href:e},s.url.parse(e)),s.data.trigger=t;var u=s.cache.has(e)?s.cache.update(e,{action:"click"}).request:s.cache.set(e,s.request(e,s.timeout,s.onRequestError.bind(s,t)),"click").request,c=function(){if(s.transitions.shouldWait)return Promise.resolve(re(u,s.data)).then(function(){})}();return Promise.resolve(c&&c.then?c.then(i):i())}catch(a){return Promise.reject(a)}},n.onRequestError=function(e){this.transitions.isRunning=!1;for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];var s=o[0],u=o[1],c=this.cache.getAction(s);return this.cache.delete(s),!(this.$&&this.$(e,c,s,u)===!1||(c==="click"&&this.force(s),1))},n.prefetch=function(e){var t=this;this.cache.has(e)||this.cache.set(e,this.request(e,this.timeout,this.onRequestError.bind(this,"barba")).catch(function(o){t.logger.error(o)}),"prefetch")},n.F=function(){this.prefetchIgnore!==!0&&(document.addEventListener("mouseover",this.B),document.addEventListener("touchstart",this.B)),document.addEventListener("click",this.U),window.addEventListener("popstate",this.D)},n.H=function(){this.prefetchIgnore!==!0&&(document.removeEventListener("mouseover",this.B),document.removeEventListener("touchstart",this.B)),document.removeEventListener("click",this.U),window.removeEventListener("popstate",this.D)},n.B=function(e){var t=this,o=this.I(e);if(o){var i=this.dom.getHref(o);this.prevent.checkHref(i)||this.cache.has(i)||this.cache.set(i,this.request(i,this.timeout,this.onRequestError.bind(this,o)).catch(function(s){t.logger.error(s)}),"enter")}},n.U=function(e){var t=this.I(e);if(t)return this.transitions.isRunning&&this.preventRunning?(e.preventDefault(),void e.stopPropagation()):void this.go(this.dom.getHref(t),t,e)},n.D=function(e){this.go(this.url.getHref(),"popstate",e)},n.I=function(e){for(var t=e.target;t&&!this.dom.getHref(t);)t=t.parentNode;if(t&&!this.prevent.checkLink(t,e,this.dom.getHref(t)))return t},n.q=function(){var e=this.url.getHref(),t={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:D({href:e},this.url.parse(e))};this.C={current:t,next:D({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},ve(r,[{key:"data",get:function(){return this.C}},{key:"wrapper",get:function(){return this._}}]),r}());Un.init({transitions:[{name:"default-transition",leave(r){r.current.container.classList.add("syuanpi fadeOutLeftShort")},enter(r){}}]});class Y{constructor(n){this.config=n,this.theme=n.theme,this.scrollArr=[]}init(){const n=Y.utils,e={smoothScroll(){$(".toc-link").on("click",function(){$("html, body").animate({scrollTop:$($.attr(this,"href")).offset().top-200})})},picPos(){const t=this;$(".post-content").each(function(){$(this).find("img").each(function(){$(this).parent("p").css("text-align","center");let o=`<img src="${this.src}"`;t.theme.lazy&&(o=`<img data-src="${this.src}" class="lazyload"`),$(this).replaceWith(`<a href="${this.src}" data-title="${this.alt}" data-lightbox="group">${o} alt="${this.alt}"></a>`)})})},showComments(){$("#com-switch").on("click",()=>{n("iss","#post-comments").display()?($("#post-comments").css("display","block").addClass("syuanpi fadeInDown"),$(this).removeClass("syuanpi").css("transform","rotate(180deg)")):($(this).addClass("syuanpi").css("transform",""),n("cls","#post-comments").opreate("fadeInDown","remove"),n("ani","#post-comments").end("fadeOutUp",function(){$(this).css("display","none")}))})}};return Y.opScroll(this.scrollArr),Object.values(e).forEach(t=>t.call(this))}back2top(){$(".toTop").on("click",function(){$("html, body").animate({scrollTop:0})})}pushHeader(){const n=this.utils("cls","#mobile-header");this.scrollArr.push(e=>{e>5?n.opreate("header-scroll","add"):n.opreate("header-scroll","remove")})}updateRound(n){const e=Math.floor(n/($(document).height()-$(window).height())*100);$("#scrollpercent").html(e)}showToc(){const n=Y.utils,e=$(".toc-link"),t=$(".headerlink");this.scrollArr.push(function(o){const i=$.map(t,function(s){return $(s).offset().top});$(".title-link a").each(function(){const s=n("cls",this);o>=0&&o<230?s.opreate("active"):s.opreate("active","remove")});for(let s=0;s<e.length;s++){const u=s+1===e.length,c=i[s],a=u?1/0:i[s+1],l=n("cls",e[s]);c<o+210&&o+210<=a?l.opreate("active"):l.opreate("active","remove")}})}titleStatus(){const n=document.title;var e;document.addEventListener("visibilitychange",function(){let t=Math.floor($(window).scrollTop()/($(document).height()-$(window).height())*100);$(document).height()-$(window).height()===0&&(t=100),document.hidden?(clearTimeout(e),document.title="Read "+t+"% \xB7 "+n):(document.title="Welcome Back \xB7 "+n,e=setTimeout(function(){document.title=n},3e3))})}showReward(){if(!this.theme.reward)return;const n=Y.utils,e=n("ani","#reward-btn");$("#reward-btn").click(()=>{n("iss","#reward-wrapper").display()?($("#reward-wrapper").css("display","flex"),e.end("clarity")):e.end("melt",()=>{$("#reward-wrapper").hide()})})}listenExit(n,e){z(n,"keydown").pipe(We(t=>t.keyCode===27)).subscribe(()=>e())}depth(n,e){const t=this.utils,o=t("cls","body"),i=t("cls",".container-inner");o.exist("under")?(o.opreate("under","remove"),i.opreate("under","remove"),e.call(this)):(o.opreate("under","add"),i.opreate("under","add"),n.call(this))}tagcloud(){const n=this.utils,e=$("#tags"),t=n("cls","#tagcloud"),o=n("ani","#tagcloud"),i=n("cls","#search"),s=n("ani","#search"),u=()=>{t.opreate("shuttleIn","remove"),o.end("zoomOut",()=>{t.opreate("syuanpi show","remove")})},c=()=>{this.depth(()=>t.opreate("syuanpi shuttleIn show"),u)};this.listenExit(e,c),this.listenExit(document.getElementsByClassName("tagcloud-taglist"),c),e.on("click",()=>{if(i.exist("show")){t.opreate("syuanpi shuttleIn show"),i.opreate("shuttleIn","remove"),s.end("zoomOut",()=>{i.opreate("syuanpi show","remove")});return}c()}),$("#tagcloud").on("click",p=>{p.stopPropagation(),p.target.tagName==="DIV"&&this.depth(()=>t.opreate("syuanpi shuttleIn show"),u)});const a=z(document.querySelectorAll(".tagcloud-tag button"),"click").pipe(k(({target:p})=>p)),l=Wt(document.querySelectorAll(".tagcloud-postlist")),h=l.pipe(k(p=>p.classList.remove("active"))),f=a.pipe(de(()=>h));Ge(f,a).pipe(k(([p,d])=>d),de(p=>l.pipe(We(d=>d.firstElementChild.innerHTML.trim()===p.innerHTML.trim())))).subscribe(p=>p.classList.add("active"))}search(){if(!this.theme.search)return;$("body").append('<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"><\/script>');const n=this.utils,e=$("#search-btn"),t=$("#search-result"),o=n("cls","#search"),i=n("ani","#search"),s=n("cls","#tagcloud"),u=n("ani","#tagcloud"),c=()=>{o.opreate("shuttleIn","remove"),i.end("zoomOut",()=>{o.opreate("syuanpi show","remove")})},a=()=>{this.depth(()=>o.opreate("syuanpi shuttleIn show"),c)};this.listenExit(document.getElementById("search"),a),e.on("click",()=>{if(s.exist("show")){o.opreate("syuanpi shuttleIn show"),s.opreate("shuttleIn","remove"),u.end("zoomOut",()=>{s.opreate("syuanpi show","remove")});return}a()}),$("#search").on("click",l=>{l.stopPropagation(),l.target.tagName==="DIV"&&this.depth(()=>o.opreate("syuanpi shuttleIn show"),c)}),ln(`${this.config.baseUrl}search.xml`,"search-input").subscribe(l=>{const h=d=>`<ul class="search-result-list syuanpi fadeInUpShort">${d}</ul>`,f=({url:d,title:v,content:E})=>`
          <li class="search-result-item">
            <a href="${d}"><h2>${v}</h2></a>
            <p>${E}</p>
          </li>
        `,p=l.map(f);t.html(h(p.join("")))})}headerMenu(){const n=this.utils,e=n("cls",".mobile-header-body"),t=n("cls",".header-menu-line"),o=$("#mobile-tags"),i=n("cls","#tagcloud");o.on("click",()=>{e.opreate("show","remove"),t.opreate("show","remove"),i.opreate("syuanpi shuttleIn show")}),$("#mobile-left").on("click",()=>{this.depth(()=>{e.opreate("show"),t.opreate("show")},()=>{e.opreate("show","remove"),t.opreate("show","remove")})})}pjax(){if(!this.theme.pjax)return;const n=this.utils,e=n("cls",".container-inner"),t=n("cls",".header"),o=n("cls",".header-wrapper");$(document).pjax(".container-inner a",".container-inner",{fragment:"container-inner"}),$(document).on("pjax:send",function(){e.opreate("syuanpi fadeOutLeftShort"),o.opreate("syuanpi fadeOutLeftShort"),t.opreate("melt")})}bootstarp(){this.showToc(),this.back2top(),this.switchToc(),this.titleStatus(),this.init(),this.pushHeader(),this.tagcloud(),this.search(),this.showReward(),this.headerMenu()}static utils(n,e){const t=s=>({opreate(u,c){return c==="remove"?$(s).removeClass(u):$(s).addClass(u)},exist(u){return $(s).hasClass(u)}});return{cls:t,iss:s=>({banderole:()=>this.theme.scheme==="banderole",balance:()=>this.theme.scheme==="balance",display(){return $(s).css("display")==="none"}}),ani:s=>({close(){return t.opreate(".syuanpi","syuanpi","remove")},end(u,c){$(s).addClass(u).one("webkitAnimationEnd AnimationEnd",function(){$(s).removeClass(u),c&&c.call(null,s)})}})}[n](e)}static opScroll(n){const e=z(window,"scroll").pipe(k(t=>t.target.scrollingElement.scrollTop));n.length&&e.subscribe(t=>n.forEach(o=>o(t)))}}class Dn extends Y{constructor(n){super(n),this.utils=Y.utils}back2top(){this.utils("cls","#backtop").opreate("melt","remove"),this.scrollArr.push(e=>{this.updateRound(e)}),super.back2top()}switchToc(){this.theme.toc;const n=this.utils,e=n("cls","#header"),t=n("cls",".post-toc");$("#switch-toc").on("click",o=>{o.stopPropagation(),e.opreate("show_toc"),t.opreate("hide","remove")}),$("#header").on("click",()=>{e.exist("show_toc")&&(e.opreate("show_toc","remove"),t.opreate("hide"))})}}return Dn});
